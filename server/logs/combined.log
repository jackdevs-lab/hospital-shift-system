{"level":"info","message":"Starting database migrations...","timestamp":"2026-01-02 02:36:19:3619"}
{"level":"info","message":"Running migration: up","timestamp":"2026-01-02 02:36:19:3619"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_users_role' GROUP BY 1","timestamp":"2026-01-02 02:36:19:3619"}
{"level":"debug","message":"Executing (default): DO 'BEGIN CREATE TYPE \"public\".\"enum_users_role\" AS ENUM(''doctor'', ''hr_admin'', ''super_admin''); EXCEPTION WHEN duplicate_object THEN null; END';","timestamp":"2026-01-02 02:36:19:3619"}
{"level":"debug","message":"Executing (default): WITH ranges AS (  SELECT pg_range.rngtypid, pg_type.typname AS rngtypname,         pg_type.typarray AS rngtyparray, pg_range.rngsubtype    FROM pg_range LEFT OUTER JOIN pg_type ON pg_type.oid = pg_range.rngtypid)SELECT pg_type.typname, pg_type.typtype, pg_type.oid, pg_type.typarray,       ranges.rngtypname, ranges.rngtypid, ranges.rngtyparray  FROM pg_type LEFT OUTER JOIN ranges ON pg_type.oid = ranges.rngsubtype WHERE (pg_type.typtype IN('b', 'e'));","timestamp":"2026-01-02 02:36:19:3619"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS \"users\" (\"id\"  SERIAL , \"email\" VARCHAR(255) NOT NULL UNIQUE, \"password_hash\" VARCHAR(255) NOT NULL, \"full_name\" VARCHAR(255) NOT NULL, \"role\" \"public\".\"enum_users_role\" NOT NULL DEFAULT 'doctor', \"department_id\" INTEGER REFERENCES \"departments\" (\"id\"), \"is_active\" BOOLEAN DEFAULT true, \"last_login_at\" TIMESTAMP WITH TIME ZONE, \"phone_number\" VARCHAR(20), \"employee_id\" VARCHAR(50) UNIQUE, \"profile_image_url\" VARCHAR(500), \"push_notification_token\" VARCHAR(500), \"email_notifications_enabled\" BOOLEAN DEFAULT true, \"push_notifications_enabled\" BOOLEAN DEFAULT true, \"created_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, \"updated_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY (\"id\"));","timestamp":"2026-01-02 02:36:19:3619"}
{"level":"error","message":"Migration failed: relation \"departments\" does not exist","name":"SequelizeDatabaseError","original":{"code":"42P01","file":"namespace.c","length":109,"line":"433","name":"error","routine":"RangeVarGetRelidExtended","severity":"ERROR","sql":"CREATE TABLE IF NOT EXISTS \"users\" (\"id\"  SERIAL , \"email\" VARCHAR(255) NOT NULL UNIQUE, \"password_hash\" VARCHAR(255) NOT NULL, \"full_name\" VARCHAR(255) NOT NULL, \"role\" \"public\".\"enum_users_role\" NOT NULL DEFAULT 'doctor', \"department_id\" INTEGER REFERENCES \"departments\" (\"id\"), \"is_active\" BOOLEAN DEFAULT true, \"last_login_at\" TIMESTAMP WITH TIME ZONE, \"phone_number\" VARCHAR(20), \"employee_id\" VARCHAR(50) UNIQUE, \"profile_image_url\" VARCHAR(500), \"push_notification_token\" VARCHAR(500), \"email_notifications_enabled\" BOOLEAN DEFAULT true, \"push_notifications_enabled\" BOOLEAN DEFAULT true, \"created_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, \"updated_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY (\"id\"));"},"parameters":{},"parent":{"code":"42P01","file":"namespace.c","length":109,"line":"433","name":"error","routine":"RangeVarGetRelidExtended","severity":"ERROR","sql":"CREATE TABLE IF NOT EXISTS \"users\" (\"id\"  SERIAL , \"email\" VARCHAR(255) NOT NULL UNIQUE, \"password_hash\" VARCHAR(255) NOT NULL, \"full_name\" VARCHAR(255) NOT NULL, \"role\" \"public\".\"enum_users_role\" NOT NULL DEFAULT 'doctor', \"department_id\" INTEGER REFERENCES \"departments\" (\"id\"), \"is_active\" BOOLEAN DEFAULT true, \"last_login_at\" TIMESTAMP WITH TIME ZONE, \"phone_number\" VARCHAR(20), \"employee_id\" VARCHAR(50) UNIQUE, \"profile_image_url\" VARCHAR(500), \"push_notification_token\" VARCHAR(500), \"email_notifications_enabled\" BOOLEAN DEFAULT true, \"push_notifications_enabled\" BOOLEAN DEFAULT true, \"created_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, \"updated_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY (\"id\"));"},"sql":"CREATE TABLE IF NOT EXISTS \"users\" (\"id\"  SERIAL , \"email\" VARCHAR(255) NOT NULL UNIQUE, \"password_hash\" VARCHAR(255) NOT NULL, \"full_name\" VARCHAR(255) NOT NULL, \"role\" \"public\".\"enum_users_role\" NOT NULL DEFAULT 'doctor', \"department_id\" INTEGER REFERENCES \"departments\" (\"id\"), \"is_active\" BOOLEAN DEFAULT true, \"last_login_at\" TIMESTAMP WITH TIME ZONE, \"phone_number\" VARCHAR(20), \"employee_id\" VARCHAR(50) UNIQUE, \"profile_image_url\" VARCHAR(500), \"push_notification_token\" VARCHAR(500), \"email_notifications_enabled\" BOOLEAN DEFAULT true, \"push_notifications_enabled\" BOOLEAN DEFAULT true, \"created_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, \"updated_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY (\"id\"));","stack":"Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Object.up (/app/database/migrations/001_create_users.js:3:1)\n    at async migrate (/app/scripts/migrate.js:16:1)","timestamp":"2026-01-02 02:36:19:3619"}
{"level":"info","message":"Starting database migrations...","timestamp":"2026-01-02 02:41:05:415"}
{"level":"info","message":"Running migration: up","timestamp":"2026-01-02 02:41:05:415"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_users_role' GROUP BY 1","timestamp":"2026-01-02 02:41:05:415"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS \"users\" (\"id\"  SERIAL , \"email\" VARCHAR(255) NOT NULL UNIQUE, \"password_hash\" VARCHAR(255) NOT NULL, \"full_name\" VARCHAR(255) NOT NULL, \"role\" \"public\".\"enum_users_role\" NOT NULL DEFAULT 'doctor', \"department_id\" INTEGER, \"is_active\" BOOLEAN DEFAULT true, \"last_login_at\" TIMESTAMP WITH TIME ZONE, \"phone_number\" VARCHAR(20), \"employee_id\" VARCHAR(50) UNIQUE, \"profile_image_url\" VARCHAR(500), \"push_notification_token\" VARCHAR(500), \"email_notifications_enabled\" BOOLEAN DEFAULT true, \"push_notifications_enabled\" BOOLEAN DEFAULT true, \"created_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, \"updated_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY (\"id\"));","timestamp":"2026-01-02 02:41:05:415"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX \"users_email\" ON \"users\" (\"email\")","timestamp":"2026-01-02 02:41:05:415"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX \"users_employee_id\" ON \"users\" (\"employee_id\")","timestamp":"2026-01-02 02:41:05:415"}
{"level":"debug","message":"Executing (default): CREATE INDEX \"users_is_active\" ON \"users\" (\"is_active\")","timestamp":"2026-01-02 02:41:05:415"}
{"level":"info","message":"Running migration: up","timestamp":"2026-01-02 02:41:05:415"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_shifts_shift_type' GROUP BY 1","timestamp":"2026-01-02 02:41:05:415"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_shifts_status' GROUP BY 1","timestamp":"2026-01-02 02:41:05:415"}
{"level":"debug","message":"Executing (default): DO 'BEGIN CREATE TYPE \"public\".\"enum_shifts_shift_type\" AS ENUM(''day'', ''night''); EXCEPTION WHEN duplicate_object THEN null; END';","timestamp":"2026-01-02 02:41:05:415"}
{"level":"debug","message":"Executing (default): DO 'BEGIN CREATE TYPE \"public\".\"enum_shifts_status\" AS ENUM(''planned'', ''active'', ''completed'', ''missed'', ''exception''); EXCEPTION WHEN duplicate_object THEN null; END';","timestamp":"2026-01-02 02:41:05:415"}
{"level":"debug","message":"Executing (default): WITH ranges AS (  SELECT pg_range.rngtypid, pg_type.typname AS rngtypname,         pg_type.typarray AS rngtyparray, pg_range.rngsubtype    FROM pg_range LEFT OUTER JOIN pg_type ON pg_type.oid = pg_range.rngtypid)SELECT pg_type.typname, pg_type.typtype, pg_type.oid, pg_type.typarray,       ranges.rngtypname, ranges.rngtypid, ranges.rngtyparray  FROM pg_type LEFT OUTER JOIN ranges ON pg_type.oid = ranges.rngsubtype WHERE (pg_type.typtype IN('b', 'e'));","timestamp":"2026-01-02 02:41:05:415"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS \"shifts\" (\"id\"  SERIAL , \"date\" DATE NOT NULL, \"start_time\" TIME NOT NULL, \"end_time\" TIME NOT NULL, \"shift_type\" \"public\".\"enum_shifts_shift_type\" NOT NULL DEFAULT 'day', \"department_id\" INTEGER NOT NULL REFERENCES \"departments\" (\"id\"), \"status\" \"public\".\"enum_shifts_status\" NOT NULL DEFAULT 'planned', \"actual_start_time\" TIMESTAMP WITH TIME ZONE, \"actual_end_time\" TIMESTAMP WITH TIME ZONE, \"late_minutes\" INTEGER DEFAULT 0, \"early_exit_minutes\" INTEGER DEFAULT 0, \"notes\" TEXT, \"created_by\" INTEGER NOT NULL REFERENCES \"users\" (\"id\"), \"updated_by\" INTEGER REFERENCES \"users\" (\"id\"), \"created_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, \"updated_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY (\"id\"));","timestamp":"2026-01-02 02:41:05:415"}
{"level":"error","message":"Migration failed: relation \"departments\" does not exist","name":"SequelizeDatabaseError","original":{"code":"42P01","file":"namespace.c","length":109,"line":"433","name":"error","routine":"RangeVarGetRelidExtended","severity":"ERROR","sql":"CREATE TABLE IF NOT EXISTS \"shifts\" (\"id\"  SERIAL , \"date\" DATE NOT NULL, \"start_time\" TIME NOT NULL, \"end_time\" TIME NOT NULL, \"shift_type\" \"public\".\"enum_shifts_shift_type\" NOT NULL DEFAULT 'day', \"department_id\" INTEGER NOT NULL REFERENCES \"departments\" (\"id\"), \"status\" \"public\".\"enum_shifts_status\" NOT NULL DEFAULT 'planned', \"actual_start_time\" TIMESTAMP WITH TIME ZONE, \"actual_end_time\" TIMESTAMP WITH TIME ZONE, \"late_minutes\" INTEGER DEFAULT 0, \"early_exit_minutes\" INTEGER DEFAULT 0, \"notes\" TEXT, \"created_by\" INTEGER NOT NULL REFERENCES \"users\" (\"id\"), \"updated_by\" INTEGER REFERENCES \"users\" (\"id\"), \"created_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, \"updated_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY (\"id\"));"},"parameters":{},"parent":{"code":"42P01","file":"namespace.c","length":109,"line":"433","name":"error","routine":"RangeVarGetRelidExtended","severity":"ERROR","sql":"CREATE TABLE IF NOT EXISTS \"shifts\" (\"id\"  SERIAL , \"date\" DATE NOT NULL, \"start_time\" TIME NOT NULL, \"end_time\" TIME NOT NULL, \"shift_type\" \"public\".\"enum_shifts_shift_type\" NOT NULL DEFAULT 'day', \"department_id\" INTEGER NOT NULL REFERENCES \"departments\" (\"id\"), \"status\" \"public\".\"enum_shifts_status\" NOT NULL DEFAULT 'planned', \"actual_start_time\" TIMESTAMP WITH TIME ZONE, \"actual_end_time\" TIMESTAMP WITH TIME ZONE, \"late_minutes\" INTEGER DEFAULT 0, \"early_exit_minutes\" INTEGER DEFAULT 0, \"notes\" TEXT, \"created_by\" INTEGER NOT NULL REFERENCES \"users\" (\"id\"), \"updated_by\" INTEGER REFERENCES \"users\" (\"id\"), \"created_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, \"updated_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY (\"id\"));"},"sql":"CREATE TABLE IF NOT EXISTS \"shifts\" (\"id\"  SERIAL , \"date\" DATE NOT NULL, \"start_time\" TIME NOT NULL, \"end_time\" TIME NOT NULL, \"shift_type\" \"public\".\"enum_shifts_shift_type\" NOT NULL DEFAULT 'day', \"department_id\" INTEGER NOT NULL REFERENCES \"departments\" (\"id\"), \"status\" \"public\".\"enum_shifts_status\" NOT NULL DEFAULT 'planned', \"actual_start_time\" TIMESTAMP WITH TIME ZONE, \"actual_end_time\" TIMESTAMP WITH TIME ZONE, \"late_minutes\" INTEGER DEFAULT 0, \"early_exit_minutes\" INTEGER DEFAULT 0, \"notes\" TEXT, \"created_by\" INTEGER NOT NULL REFERENCES \"users\" (\"id\"), \"updated_by\" INTEGER REFERENCES \"users\" (\"id\"), \"created_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, \"updated_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY (\"id\"));","stack":"Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Object.up (/app/database/migrations/002_create_shifts.js:3:5)\n    at async migrate (/app/scripts/migrate.js:16:1)","timestamp":"2026-01-02 02:41:05:415"}
{"level":"info","message":"Starting database migrations...","timestamp":"2026-01-02 02:46:45:4645"}
{"level":"info","message":"Running migration: up","timestamp":"2026-01-02 02:46:45:4645"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_users_role' GROUP BY 1","timestamp":"2026-01-02 02:46:45:4645"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS \"users\" (\"id\"  SERIAL , \"email\" VARCHAR(255) NOT NULL UNIQUE, \"password_hash\" VARCHAR(255) NOT NULL, \"full_name\" VARCHAR(255) NOT NULL, \"role\" \"public\".\"enum_users_role\" NOT NULL DEFAULT 'doctor', \"department_id\" INTEGER, \"is_active\" BOOLEAN DEFAULT true, \"last_login_at\" TIMESTAMP WITH TIME ZONE, \"phone_number\" VARCHAR(20), \"employee_id\" VARCHAR(50) UNIQUE, \"profile_image_url\" VARCHAR(500), \"push_notification_token\" VARCHAR(500), \"email_notifications_enabled\" BOOLEAN DEFAULT true, \"push_notifications_enabled\" BOOLEAN DEFAULT true, \"created_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, \"updated_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY (\"id\"));","timestamp":"2026-01-02 02:46:45:4645"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX \"users_email\" ON \"users\" (\"email\")","timestamp":"2026-01-02 02:46:45:4645"}
{"level":"error","message":"Migration failed: relation \"users_email\" already exists","name":"SequelizeDatabaseError","original":{"code":"42P07","file":"index.c","length":93,"line":"873","name":"error","routine":"index_create","severity":"ERROR","sql":"CREATE UNIQUE INDEX \"users_email\" ON \"users\" (\"email\")"},"parameters":{},"parent":{"code":"42P07","file":"index.c","length":93,"line":"873","name":"error","routine":"index_create","severity":"ERROR","sql":"CREATE UNIQUE INDEX \"users_email\" ON \"users\" (\"email\")"},"sql":"CREATE UNIQUE INDEX \"users_email\" ON \"users\" (\"email\")","stack":"Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.addIndex (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:250:12)\n    at async Object.up (/app/database/migrations/001_create_users.js:73:5)\n    at async migrate (/app/scripts/migrate.js:16:1)","timestamp":"2026-01-02 02:46:45:4645"}
{"level":"info","message":"Starting database migrations...","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"info","message":"Running migration: up","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_users_role' GROUP BY 1","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS \"users\" (\"id\"  SERIAL , \"email\" VARCHAR(255) NOT NULL UNIQUE, \"password_hash\" VARCHAR(255) NOT NULL, \"full_name\" VARCHAR(255) NOT NULL, \"role\" \"public\".\"enum_users_role\" NOT NULL DEFAULT 'doctor', \"department_id\" INTEGER, \"is_active\" BOOLEAN DEFAULT true, \"last_login_at\" TIMESTAMP WITH TIME ZONE, \"phone_number\" VARCHAR(20), \"employee_id\" VARCHAR(50) UNIQUE, \"profile_image_url\" VARCHAR(500), \"push_notification_token\" VARCHAR(500), \"email_notifications_enabled\" BOOLEAN DEFAULT true, \"push_notifications_enabled\" BOOLEAN DEFAULT true, \"created_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, \"updated_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY (\"id\"));","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX \"users_email\" ON \"users\" (\"email\")","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX \"users_employee_id\" ON \"users\" (\"employee_id\")","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"debug","message":"Executing (default): CREATE INDEX \"users_is_active\" ON \"users\" (\"is_active\")","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"info","message":"Running migration: up","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_shifts_shift_type' GROUP BY 1","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_shifts_status' GROUP BY 1","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS \"shifts\" (\"id\"  SERIAL , \"date\" DATE NOT NULL, \"start_time\" TIME NOT NULL, \"end_time\" TIME NOT NULL, \"shift_type\" \"public\".\"enum_shifts_shift_type\" NOT NULL DEFAULT 'day', \"department_id\" INTEGER, \"status\" \"public\".\"enum_shifts_status\" NOT NULL DEFAULT 'planned', \"actual_start_time\" TIMESTAMP WITH TIME ZONE, \"actual_end_time\" TIMESTAMP WITH TIME ZONE, \"late_minutes\" INTEGER DEFAULT 0, \"early_exit_minutes\" INTEGER DEFAULT 0, \"notes\" TEXT, \"created_by\" INTEGER NOT NULL REFERENCES \"users\" (\"id\"), \"updated_by\" INTEGER REFERENCES \"users\" (\"id\"), \"created_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, \"updated_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY (\"id\"));","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"debug","message":"Executing (default): CREATE INDEX \"shifts_date_status\" ON \"shifts\" (\"date\", \"status\")","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"debug","message":"Executing (default): CREATE INDEX \"shifts_status\" ON \"shifts\" (\"status\")","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"debug","message":"Executing (default): CREATE INDEX \"shifts_created_by\" ON \"shifts\" (\"created_by\")","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"debug","message":"Executing (default): CREATE INDEX \"shifts_updated_by\" ON \"shifts\" (\"updated_by\")","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"info","message":"Running migration: up","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS \"audit_logs\" (\"id\"  SERIAL , \"user_id\" INTEGER NOT NULL REFERENCES \"users\" (\"id\"), \"action\" VARCHAR(100) NOT NULL, \"entity_type\" VARCHAR(50), \"entity_id\" INTEGER, \"old_values\" JSONB, \"new_values\" JSONB, \"ip_address\" INET, \"user_agent\" TEXT, \"correlation_id\" UUID, \"created_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, \"updated_at\" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY (\"id\"));","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"debug","message":"Executing (default): CREATE INDEX \"audit_logs_user_id_created_at\" ON \"audit_logs\" (\"user_id\", \"created_at\")","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"debug","message":"Executing (default): CREATE INDEX \"audit_logs_entity_type_entity_id\" ON \"audit_logs\" (\"entity_type\", \"entity_id\")","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"debug","message":"Executing (default): CREATE INDEX \"audit_logs_action\" ON \"audit_logs\" (\"action\")","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"debug","message":"Executing (default): CREATE INDEX \"audit_logs_created_at\" ON \"audit_logs\" (\"created_at\")","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"debug","message":"Executing (default): CREATE INDEX \"audit_logs_correlation_id\" ON \"audit_logs\" (\"correlation_id\")","timestamp":"2026-01-02 02:53:34:5334"}
{"level":"info","message":"Database migrations completed successfully","timestamp":"2026-01-02 02:53:34:5334"}
